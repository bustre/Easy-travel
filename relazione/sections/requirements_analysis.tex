% !TeX spellcheck = it_IT
\section{Raccolta e analisi dei requisiti}
\subsection{Proprietà del sistema}

%
% Incipit
%
Si vuole realizzare una base di dati per applicazione che permette di confrontare le offerte fornite da diverse agenzie di viaggio, inoltre si desidera rappresentare: gli utenti, gli acquisti, le agenzie, i pacchetti di viaggio, le recensioni, gli alloggi, i mezzi di trasporto, le tratte che percorrono i mezzi, le città di soggiorno e la descrizione testuale di ogni soluzione di viaggio.
%
% Utenti 
%
Gli \textbf{utenti} che sono registrati alla piattaforma vengono identificati da un \underline{username} scelto durante la fase di registrazione al servizio, inoltre vengono memorizzati per ogni utente: la password, l'email e la data di iscrizione al servizio.

%
% Utente -> Cliente
%
All'interno del sistema esistono due tipologie di utenti: i \emph{clienti} e le \emph{agenzie}. Di ogni \textbf{cliente} vengono salvate delle informazioni aggiuntive: il nome, il cognome e il numero di telefono (facoltativo). Mentre per ogni \textbf{agenzia} presente nel database viene salvato in aggiunta: il nome e la sede legale.
%
% Clienti -> pacchetti
%
I clienti possono prenotare i pacchetti di viaggio forniti dalle agenzie. Per ogni \textbf{prenotazione} identificata dall'\underline{utente} che ha effettuato l'operazione e dalla \underline{data dell'operazione}, vengono salvati inoltre:
\begin{multicols}{2}
\begin{itemize}
    \item numero partecipanti;
    \item destinazioni \footnote{Possono essere più di una.};
    \item tratte (andata e ritorno);
    \item i luoghi di soggiorno;
    \item una descrizione del viaggio;
    \item transizione per il pagamento.
\end{itemize}
\end{multicols}
%
% Pagamento -> transizione
%
Ogni \textbf{transizione} viene identificata da \underline{codice} e riporta i seguenti dati: la banca dove è avvenuto il pagamento, il circuito bancario usato e il timestamp della transizione.
%
% Pacchetti
%
I \textbf{pacchetti} vengono identificati attraverso un \underline{ID} e sono inseriti nel sistema dalle agenzie, inoltre ogni soluzione di viaggio deve riportare le seguente informazioni:
il prezzo,
\footnote{per ogni singola persona.}
la disponibilità, \footnote{Numero di pacchetti ancora disponibili}
la data di partenza e di ritorno,
il massimo numero di partecipanti,
\footnote{Il numero di persone massime che ammette un pacchetto di viaggio per un solo acquisto.}
l'assicurazione per il viaggio.
Ogni viaggio deve fare riferimento ad \textbf{polizza} assicurativa che viene identificata nel sistema attraverso un \underline{ID}, inoltre viene salvata: una descrizione della polizza e il nome dell'agenzia di assicurazione.
%
% Trasporto & tratte
%
Ogni pacchetto comprende già i mezzi da prendere per andare nelle varie destinazioni e per il ritorno. Per arrivare a destinazione o per il ritorno può essere necessario prendere più mezzi, ognuno dei quali percorre una tratta. I \textbf{mezzi di trasporto} sono identificati attraverso l'\underline{azienda} che mette a disposizione il veicolo e il \underline{codice mezzo} utilizzato dall'azienda. Vengono registrati per ogni \emph{tipologia} di mezzo le seguenti informazioni:
l'\textbf{autobus} riporta il numero di linea,
il \textbf{Treno} e la \textbf{Nave} riportano la classe,
l'\textbf{aereo} riporta:
la classe,
il check-in\footnote{Informazioni per il Check-in.},
bagaglio in stiva\footnote{Viene indicato se è incluso nel pacchetto.},
bagaglio a mano\footnote{Viene riportato il peso concesso.},
%
il \textbf{Taxi} taxi riporta il numero di telefono.


Di ogni \textbf{tratta} identificata attraverso: il \underline{codice mezzo}, il \underline{nome dell'agenzia} che fornisce il servizio e il \underline{nome del mezzo} che viene usato. Inoltre ogni tratta riporta le seguente informazioni:
\begin{multicols}{2}
    \begin{itemize}
        \item mezzo utilizzato per la tratta;
        \item orario di partenza;
        \item orario di arrivo;
        \item luogo di partenza;
        \item luogo di arrivo.
    \end{itemize}
\end{multicols}
\noindent
%
% Destinazioni / descrizione pacchetto & Aloggi
%
Un pacchetto può avere molteplici destinazione (viaggio con più tappe) oppure solo una destinazione (classico), inoltre vengono salvati anche gli \textbf{alloggi} dove il cliente soggiornerà durante il viaggio, per ogni alloggio viene fornita una descrizione e il numero di stelle (da 1 a 5) dell'alloggio se disponibili. Gli alloggi vengono identificati dal \underline{nome} della struttura e dal \underline{luogo} in cu si trovano.

%
% Città
%
Le destinazioni di un pacchetto, il luogo di partenza/arrivo di ogni tratta, i luoghi dove si trovano i soggiorni per il viaggio e la sede legale di un'agenzia sono delle \emph{città}. Una \textbf{città} che viene identificata da un \underline{codice interno}, vengono riportate le seguente informazioni: nome della città e nome del stato in cui si trova.

%
% Recensioni
%
L'utente può scrivere delle \textbf{recensioni} per il pacchetto viaggio e per l'agenzia che ha fornito la soluzione, le recensioni sono identificate da un \underline{ID}. Nella recensione viene salvato un giudizio su una scala da 0 a 5 e una motivazione del giudizio dato che può essere facoltativo.

%
% Descrizione
%
Il pacchetto e l'alloggio devono avere una \textbf{descrizione} identificata univocamente da un \underline{codice}, dove troviamo: un titolo e una descrizione testuale.
%

\subsection{Glossario dei termini}
\begin{center}
    \begin{tabularx}{\textwidth}{p{0.16\textwidth} X p{0.18\textwidth} p{0.20\textwidth}}
        \caption{Dizionario termini}\\\toprule\endfirsthead
        \toprule\endhead
        \midrule\multicolumn{4}{r}{\itshape Continua nella pagina successiva}\\\midrule\endfoot
        \bottomrule\endlastfoot
        %
        %
        %
        \textbf{Termine} & \textbf{Descrizione} & \textbf{Sinonimi} & \textbf{Collegamenti} \\
        \midrule
        \textbf{Utente} & Utente generico iscritto al sistema. & &
        \\\midrule
        \textbf{Cliente} & Utente iscritto al servizio. & & Recensione, Prenotazione
        \\\midrule
        \textbf{Agenzia} & Utente iscritto nel sistema che può offrire dei pacchetti viaggio. & & Recensione, Pacchetto Viaggio, Città
        \\\midrule
        \textbf{Pacchetto} & Soluzione di viaggio offerto da un'agenzia di viaggio & Pacchetto di viaggio & Prenotazione, Recensione, Alloggio, Polizza, Descrizione, Tratte
        \\\midrule
        \textbf{Prenotazione} & Comprare un pacchetto di viaggio & Acquisto, comprare & Cliente, Pacchetto Viaggio
        \\\midrule
        \textbf{Tratta} & Tratta percorsa da un mezzo di trasporto & & Mezzo Trasporto, Città, Pacchetto di Viaggio
        \\\midrule
        \textbf{Recensione} & Giudizio del cliente testuale e numerico basato su una scala da 0 a 5 & & Cliente, Agenzia, Pacchetto 
        \\\midrule
        \textbf{Descrizione} & Descrizione testuale di un servizio, formata da un titolo e da un testo & & Pacchetto, Alloggio
        \\\midrule
        \textbf{Mezzo} & Mezzo di trasporto che l'agenzia include nel pacchetto per l'andata/ritorno & Mezzo di trasporto, trasporto, servizio di trasporto & Tratta
        \\\midrule
        \textbf{Alloggio} & Dimora per il viaggio & & Città, Pacchetto, Descrizione
        \\
    \end{tabularx}
\end{center}

\subsection{Operazioni}
Nel caso d'uso perso in esame il numero di operazioni effettuate non hanno una distribuzione uniforme durante l'anno, ma alcune operazioni in particolare presentano un numero di richieste maggiore durante i periodi di vacanza, cioè durante i periodi di \emph{massimo carico} per il sistema, mentre in altri periodi ci sono momenti di \emph{idle}. Riportiamo di seguito le operazioni considerando il massimo di operazioni registrare per un certo periodo, dato che in contesti come questi la priorità è che il sistema riesca a soddisfare tutte le richieste.
\newline
\begin{center}
    \begin{tabularx}{\textwidth}{p{0.2\textwidth} X p{0.25\textwidth}}
        \caption{Tabella delle operazioni}\\\toprule\endfirsthead
        \toprule\endhead
        \midrule\multicolumn{3}{r}{\itshape Continua nella pagina successiva}\\\midrule\endfoot
        \bottomrule\endlastfoot
        %
        %
        \textbf{Operazione} & \textbf{Descrizione dell'operazione} & \textbf{N°. operazioni}
        \\
        && (\textbf{operazioni/tempo})\footnote{Riportiamo le misure di tempo: \textbf{dd} = giorni, \textbf{mm} = mesi \& \textbf{yy} = anni.}
        \\\midrule
        \emph{Inserimento pacchetto} & Inserimento di un pacchetto da parte di una agenzia & 10 o/dd
        \\\midrule
        \emph{Inserimento descrizione} & Inserimento di una descrizione per un pacchetto o per un luogo di soggiorno & 15 o/dd
        \\\midrule
        \emph{Inserimento mezzo} & Inserimento nuovo mezzo per un viaggio & 2 o/mm
        \\\midrule
        \emph{Iscrizione utente} & Un utente si iscrive al servizio & 40 o/dd
        \\\midrule
        \emph{Inserimento recensione} & Un utente aggiunge una recensione & 3.000 o/mm
        \\\midrule
        \emph{Ricerca pacchetti} & Ricerca dei pacchetti da parte degli utenti & 600.000 o/dd
        \\\midrule
        \emph{Inserimento agenzia} & Viene aggiunta una nuova agenzia & 3 o/mm
        \\\midrule
        \emph{Inserimento città} & Viene aggiunta una nuova città & 10 o/yy
        \\\midrule
        \emph{Inserimento sconto} & Inserimento di un nuovo sconto & 8 o/dd
        \\\midrule
        \emph{Acquisto pacchetto} & Un cliente acquista un pacchetto & 100.000 o/gg
        \\\midrule
        \emph{Visualizzazione degli acquisti} & Un cliente vuole visualizzare gli acquisti passati & 90 o/gg
        \\\midrule
        \emph{Visualizzazione dei punti} & Un cliente vuole vedere i punti a sua disposizione & 1.600 o/gg
        \\
    \end{tabularx}
\end{center}